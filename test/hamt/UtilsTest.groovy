package hamt

class UtilsTest extends GroovyTestCase {

    void testIndex32() {
        println "index32 Test"
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0000i, 0) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0001i, 0) == 0
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0010i, 0) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0010i, 1) == 0
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0011i, 1) == 1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0100i, 0) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0100i, 1) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0100i, 2) == 0
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0101i, 0) == 0
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0101i, 1) == -2
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_0101i, 2) == 1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_1100i, 0) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_1100i, 1) == -1
        assert Utils.index32(0b0000_0000_0000_0000_0000_0000_0000_1100i, 2) == 0
        assert Utils.index32(0b1000_0000_0000_0000_0000_0000_0000_1100i, 31) == 2
    }

    void testIndex64() {
        println "index64 Test"
        assert Utils.index64(0b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000l, 0) == -1
        assert Utils.index64(0b0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000l, 63) == -1
        assert Utils.index64(0b1000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000_0000l, 63) == 0
        assert Utils.index64(0b1000_0000_0100_0000_0000_0100_0000_0000_0000_0000_0000_0000_0000_0100_0000_0100l, 63) == 4
        assert Utils.index64(0b0000_0000_0100_0000_0000_0100_0000_0000_0000_0000_0000_0000_0000_0100_0000_0100l, 63) == -5
    }
}
